"""initial schema - all 17 tables

Revision ID: d68ed06192f9
Revises: 
Create Date: 2026-02-18 12:31:06.724361

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = 'd68ed06192f9'
down_revision: Union[str, None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('alert_config',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('signal_types', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('min_strength', sa.Numeric(precision=5, scale=4), nullable=False),
    sa.Column('tickers', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('members', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('webhook_url', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('campaign_committee',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('fec_committee_id', sa.String(length=20), nullable=False),
    sa.Column('name', sa.String(length=300), nullable=False),
    sa.Column('committee_type', sa.String(length=10), nullable=True),
    sa.Column('party', sa.String(length=10), nullable=True),
    sa.Column('state', sa.String(length=2), nullable=True),
    sa.Column('candidate_fec_id', sa.String(length=20), nullable=True),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_campaign_committee_candidate_fec_id'), 'campaign_committee', ['candidate_fec_id'], unique=False)
    op.create_index(op.f('ix_campaign_committee_fec_committee_id'), 'campaign_committee', ['fec_committee_id'], unique=True)
    op.create_index(op.f('ix_campaign_committee_member_bioguide_id'), 'campaign_committee', ['member_bioguide_id'], unique=False)
    op.create_table('committee',
    sa.Column('system_code', sa.String(length=10), nullable=False),
    sa.Column('name', sa.String(length=300), nullable=False),
    sa.Column('chamber', sa.String(length=10), nullable=False),
    sa.Column('parent_code', sa.String(length=10), nullable=True),
    sa.Column('url', sa.Text(), nullable=True),
    sa.Column('is_current', sa.Boolean(), nullable=False),
    sa.Column('jurisdiction', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('system_code')
    )
    op.create_table('congress_member',
    sa.Column('bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('full_name', sa.String(length=200), nullable=False),
    sa.Column('first_name', sa.String(length=100), nullable=True),
    sa.Column('last_name', sa.String(length=100), nullable=True),
    sa.Column('chamber', sa.String(length=10), nullable=False),
    sa.Column('state', sa.String(length=2), nullable=True),
    sa.Column('district', sa.String(length=10), nullable=True),
    sa.Column('party', sa.String(length=50), nullable=True),
    sa.Column('in_office', sa.Boolean(), nullable=False),
    sa.Column('first_elected', sa.Integer(), nullable=True),
    sa.Column('social_accounts', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('nominate_dim1', sa.Float(), nullable=True),
    sa.Column('nominate_dim2', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('bioguide_id')
    )
    op.create_table('lobbying_client',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(length=300), nullable=False),
    sa.Column('normalized_name', sa.String(length=300), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=2), nullable=True),
    sa.Column('matched_ticker', sa.String(length=20), nullable=True),
    sa.Column('match_confidence', sa.Numeric(precision=5, scale=4), nullable=True),
    sa.Column('match_method', sa.String(length=50), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lobbying_client_matched_ticker'), 'lobbying_client', ['matched_ticker'], unique=False)
    op.create_index(op.f('ix_lobbying_client_name'), 'lobbying_client', ['name'], unique=False)
    op.create_index(op.f('ix_lobbying_client_normalized_name'), 'lobbying_client', ['normalized_name'], unique=False)
    op.create_table('lobbying_registrant',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('senate_id', sa.String(length=50), nullable=True),
    sa.Column('name', sa.String(length=300), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lobbying_registrant_name'), 'lobbying_registrant', ['name'], unique=False)
    op.create_index(op.f('ix_lobbying_registrant_senate_id'), 'lobbying_registrant', ['senate_id'], unique=True)
    op.create_table('media_content',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('source_type', sa.String(length=50), nullable=False),
    sa.Column('source_id', sa.String(length=500), nullable=False),
    sa.Column('title', sa.Text(), nullable=True),
    sa.Column('content', sa.Text(), nullable=True),
    sa.Column('summary', sa.Text(), nullable=True),
    sa.Column('url', sa.Text(), nullable=True),
    sa.Column('author', sa.String(length=300), nullable=True),
    sa.Column('published_date', sa.Date(), nullable=True),
    sa.Column('member_bioguide_ids', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('tickers_mentioned', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('raw_metadata', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('source_type', 'source_id', name='uq_media_content_source')
    )
    op.create_index(op.f('ix_media_content_published_date'), 'media_content', ['published_date'], unique=False)
    op.create_index(op.f('ix_media_content_source_type'), 'media_content', ['source_type'], unique=False)
    op.create_index('ix_media_source_type_date', 'media_content', ['source_type', 'published_date'], unique=False)
    op.create_table('ml_model_artifact',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('model_name', sa.String(length=100), nullable=False),
    sa.Column('model_version', sa.String(length=50), nullable=False),
    sa.Column('artifact_path', sa.Text(), nullable=True),
    sa.Column('metrics', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('feature_columns', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('training_config', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('trained_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('model_name', 'model_version', name='uq_model_name_version')
    )
    op.create_index(op.f('ix_ml_model_artifact_model_name'), 'ml_model_artifact', ['model_name'], unique=False)
    op.create_table('stock_daily',
    sa.Column('ticker', sa.String(length=20), nullable=False),
    sa.Column('date', sa.Date(), nullable=False),
    sa.Column('open', sa.Numeric(precision=12, scale=4), nullable=True),
    sa.Column('high', sa.Numeric(precision=12, scale=4), nullable=True),
    sa.Column('low', sa.Numeric(precision=12, scale=4), nullable=True),
    sa.Column('close', sa.Numeric(precision=12, scale=4), nullable=True),
    sa.Column('adj_close', sa.Numeric(precision=12, scale=4), nullable=True),
    sa.Column('volume', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('ticker', 'date')
    )
    op.create_table('bill',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('bill_id', sa.String(length=30), nullable=False),
    sa.Column('congress_number', sa.Integer(), nullable=False),
    sa.Column('bill_type', sa.String(length=10), nullable=False),
    sa.Column('bill_number', sa.Integer(), nullable=False),
    sa.Column('title', sa.Text(), nullable=False),
    sa.Column('short_title', sa.String(length=500), nullable=True),
    sa.Column('introduced_date', sa.Date(), nullable=True),
    sa.Column('sponsor_bioguide_id', sa.String(length=10), nullable=True),
    sa.Column('sponsor_name', sa.String(length=200), nullable=True),
    sa.Column('status', sa.String(length=100), nullable=True),
    sa.Column('subjects', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('committees', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('actions', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('latest_action_date', sa.Date(), nullable=True),
    sa.Column('latest_action_text', sa.Text(), nullable=True),
    sa.Column('policy_area', sa.String(length=200), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['sponsor_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_bill_bill_id'), 'bill', ['bill_id'], unique=True)
    op.create_index(op.f('ix_bill_congress_number'), 'bill', ['congress_number'], unique=False)
    op.create_index('ix_bill_congress_type', 'bill', ['congress_number', 'bill_type'], unique=False)
    op.create_index(op.f('ix_bill_introduced_date'), 'bill', ['introduced_date'], unique=False)
    op.create_index(op.f('ix_bill_sponsor_bioguide_id'), 'bill', ['sponsor_bioguide_id'], unique=False)
    op.create_table('campaign_contribution',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('fec_transaction_id', sa.String(length=50), nullable=True),
    sa.Column('committee_id', sa.Integer(), nullable=True),
    sa.Column('contributor_name', sa.String(length=300), nullable=False),
    sa.Column('contributor_employer', sa.String(length=300), nullable=True),
    sa.Column('contributor_occupation', sa.String(length=300), nullable=True),
    sa.Column('contributor_city', sa.String(length=100), nullable=True),
    sa.Column('contributor_state', sa.String(length=2), nullable=True),
    sa.Column('contributor_zip', sa.String(length=10), nullable=True),
    sa.Column('amount', sa.Numeric(precision=12, scale=2), nullable=False),
    sa.Column('contribution_date', sa.Date(), nullable=True),
    sa.Column('transaction_type', sa.String(length=10), nullable=True),
    sa.Column('matched_ticker', sa.String(length=20), nullable=True),
    sa.Column('match_confidence', sa.Numeric(precision=5, scale=4), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['committee_id'], ['campaign_committee.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('fec_transaction_id', name='uq_campaign_contribution_txn')
    )
    op.create_index(op.f('ix_campaign_contribution_committee_id'), 'campaign_contribution', ['committee_id'], unique=False)
    op.create_index(op.f('ix_campaign_contribution_contribution_date'), 'campaign_contribution', ['contribution_date'], unique=False)
    op.create_index(op.f('ix_campaign_contribution_contributor_employer'), 'campaign_contribution', ['contributor_employer'], unique=False)
    op.create_index(op.f('ix_campaign_contribution_fec_transaction_id'), 'campaign_contribution', ['fec_transaction_id'], unique=False)
    op.create_index(op.f('ix_campaign_contribution_matched_ticker'), 'campaign_contribution', ['matched_ticker'], unique=False)
    op.create_table('committee_assignment',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('committee_code', sa.String(length=20), nullable=False),
    sa.Column('committee_name', sa.String(length=300), nullable=False),
    sa.Column('role', sa.String(length=50), nullable=True),
    sa.Column('congress_number', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_committee_assignment_member_bioguide_id'), 'committee_assignment', ['member_bioguide_id'], unique=False)
    op.create_table('committee_hearing',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('committee_code', sa.String(length=10), nullable=True),
    sa.Column('title', sa.Text(), nullable=False),
    sa.Column('hearing_date', sa.Date(), nullable=True),
    sa.Column('chamber', sa.String(length=10), nullable=True),
    sa.Column('congress_number', sa.Integer(), nullable=True),
    sa.Column('url', sa.Text(), nullable=True),
    sa.Column('transcript_url', sa.Text(), nullable=True),
    sa.Column('related_bills', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['committee_code'], ['committee.system_code'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_committee_hearing_committee_code'), 'committee_hearing', ['committee_code'], unique=False)
    op.create_index(op.f('ix_committee_hearing_hearing_date'), 'committee_hearing', ['hearing_date'], unique=False)
    op.create_index('ix_hearing_dedup', 'committee_hearing', ['committee_code', 'title', 'hearing_date'], unique=True)
    op.create_table('lobbying_filing',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('filing_uuid', sa.String(length=50), nullable=False),
    sa.Column('filing_type', sa.String(length=50), nullable=False),
    sa.Column('filing_year', sa.Integer(), nullable=False),
    sa.Column('filing_period', sa.String(length=20), nullable=True),
    sa.Column('filing_date', sa.Date(), nullable=True),
    sa.Column('amount', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('registrant_id', sa.Integer(), nullable=True),
    sa.Column('registrant_name', sa.String(length=300), nullable=True),
    sa.Column('client_id', sa.Integer(), nullable=True),
    sa.Column('client_name', sa.String(length=300), nullable=True),
    sa.Column('specific_issues', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('general_issue_codes', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('government_entities', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('lobbied_bills', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['client_id'], ['lobbying_client.id'], ),
    sa.ForeignKeyConstraint(['registrant_id'], ['lobbying_registrant.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lobbying_filing_filing_uuid'), 'lobbying_filing', ['filing_uuid'], unique=True)
    op.create_table('member_family',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('relationship_type', sa.String(length=50), nullable=False),
    sa.Column('known_employers', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_member_family_member_bioguide_id'), 'member_family', ['member_bioguide_id'], unique=False)
    op.create_table('member_media_mention',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('media_content_id', sa.Integer(), nullable=False),
    sa.Column('mention_type', sa.String(length=50), nullable=True),
    sa.Column('context_snippet', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['media_content_id'], ['media_content.id'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_member_media_mention_media_content_id'), 'member_media_mention', ['media_content_id'], unique=False)
    op.create_index(op.f('ix_member_media_mention_member_bioguide_id'), 'member_media_mention', ['member_bioguide_id'], unique=False)
    op.create_table('member_staff',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('title', sa.String(length=200), nullable=True),
    sa.Column('start_date', sa.Date(), nullable=True),
    sa.Column('end_date', sa.Date(), nullable=True),
    sa.Column('subsequent_employer', sa.String(length=300), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_member_staff_member_bioguide_id'), 'member_staff', ['member_bioguide_id'], unique=False)
    op.create_table('sentiment_analysis',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('media_content_id', sa.Integer(), nullable=False),
    sa.Column('model_name', sa.String(length=100), nullable=False),
    sa.Column('sentiment_label', sa.String(length=20), nullable=True),
    sa.Column('sentiment_score', sa.Numeric(precision=5, scale=4), nullable=True),
    sa.Column('confidence', sa.Numeric(precision=5, scale=4), nullable=True),
    sa.Column('entities', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('sectors', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('tickers_extracted', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['media_content_id'], ['media_content.id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('media_content_id', 'model_name', name='uq_sentiment_content_model')
    )
    op.create_index(op.f('ix_sentiment_analysis_media_content_id'), 'sentiment_analysis', ['media_content_id'], unique=False)
    op.create_table('signal',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('signal_type', sa.String(length=50), nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=True),
    sa.Column('ticker', sa.String(length=20), nullable=True),
    sa.Column('direction', sa.String(length=10), nullable=False),
    sa.Column('strength', sa.Numeric(precision=5, scale=4), nullable=False),
    sa.Column('confidence', sa.Numeric(precision=5, scale=4), nullable=False),
    sa.Column('evidence', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_signal_member_bioguide_id'), 'signal', ['member_bioguide_id'], unique=False)
    op.create_index(op.f('ix_signal_signal_type'), 'signal', ['signal_type'], unique=False)
    op.create_index(op.f('ix_signal_ticker'), 'signal', ['ticker'], unique=False)
    op.create_index('ix_signal_type_active_created', 'signal', ['signal_type', 'is_active', 'created_at'], unique=False)
    op.create_table('trade_disclosure',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=True),
    sa.Column('member_name', sa.String(length=200), nullable=False),
    sa.Column('filer_type', sa.String(length=50), nullable=False),
    sa.Column('ticker', sa.String(length=20), nullable=True),
    sa.Column('asset_name', sa.String(length=500), nullable=False),
    sa.Column('asset_type', sa.String(length=100), nullable=True),
    sa.Column('transaction_type', sa.String(length=50), nullable=False),
    sa.Column('transaction_date', sa.Date(), nullable=False),
    sa.Column('disclosure_date', sa.Date(), nullable=True),
    sa.Column('amount_range_low', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('amount_range_high', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('chamber', sa.String(length=10), nullable=True),
    sa.Column('source', sa.String(length=50), nullable=False),
    sa.Column('filing_url', sa.Text(), nullable=True),
    sa.Column('raw_data', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('ix_trade_dedup', 'trade_disclosure', ['member_name', 'ticker', 'transaction_date', 'transaction_type', 'amount_range_low'], unique=True)
    op.create_index(op.f('ix_trade_disclosure_disclosure_date'), 'trade_disclosure', ['disclosure_date'], unique=False)
    op.create_index(op.f('ix_trade_disclosure_member_bioguide_id'), 'trade_disclosure', ['member_bioguide_id'], unique=False)
    op.create_index(op.f('ix_trade_disclosure_ticker'), 'trade_disclosure', ['ticker'], unique=False)
    op.create_index(op.f('ix_trade_disclosure_transaction_date'), 'trade_disclosure', ['transaction_date'], unique=False)
    op.create_table('bill_cosponsor',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('bill_id', sa.Integer(), nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('date_added', sa.Date(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['bill_id'], ['bill.id'], ),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_bill_cosponsor_bill_id'), 'bill_cosponsor', ['bill_id'], unique=False)
    op.create_index(op.f('ix_bill_cosponsor_member_bioguide_id'), 'bill_cosponsor', ['member_bioguide_id'], unique=False)
    op.create_index('ix_cosponsor_dedup', 'bill_cosponsor', ['bill_id', 'member_bioguide_id'], unique=True)
    op.create_table('lobbying_lobbyist',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('filing_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('covered_position', sa.Text(), nullable=True),
    sa.Column('is_former_congress', sa.Boolean(), nullable=True),
    sa.Column('is_former_executive', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['filing_id'], ['lobbying_filing.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_lobbying_lobbyist_filing_id'), 'lobbying_lobbyist', ['filing_id'], unique=False)
    op.create_table('trade_prediction',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('trade_id', sa.Integer(), nullable=False),
    sa.Column('model_artifact_id', sa.Integer(), nullable=True),
    sa.Column('prediction_type', sa.String(length=50), nullable=False),
    sa.Column('predicted_value', sa.Numeric(precision=8, scale=4), nullable=True),
    sa.Column('predicted_label', sa.String(length=50), nullable=True),
    sa.Column('confidence', sa.Numeric(precision=5, scale=4), nullable=True),
    sa.Column('feature_vector', postgresql.JSONB(astext_type=sa.Text()), nullable=True),
    sa.Column('actual_return_5d', sa.Numeric(precision=8, scale=4), nullable=True),
    sa.Column('actual_return_21d', sa.Numeric(precision=8, scale=4), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['model_artifact_id'], ['ml_model_artifact.id'], ),
    sa.ForeignKeyConstraint(['trade_id'], ['trade_disclosure.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('trade_id', 'model_artifact_id', 'prediction_type', name='uq_trade_prediction_unique')
    )
    op.create_index(op.f('ix_trade_prediction_trade_id'), 'trade_prediction', ['trade_id'], unique=False)
    op.create_table('vote_record',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('member_bioguide_id', sa.String(length=10), nullable=False),
    sa.Column('bill_id', sa.Integer(), nullable=True),
    sa.Column('vote_date', sa.Date(), nullable=False),
    sa.Column('congress_number', sa.Integer(), nullable=False),
    sa.Column('roll_call_number', sa.Integer(), nullable=True),
    sa.Column('chamber', sa.String(length=10), nullable=False),
    sa.Column('position', sa.String(length=20), nullable=False),
    sa.Column('question', sa.Text(), nullable=True),
    sa.Column('result', sa.String(length=50), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['bill_id'], ['bill.id'], ),
    sa.ForeignKeyConstraint(['member_bioguide_id'], ['congress_member.bioguide_id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('ix_vote_dedup', 'vote_record', ['member_bioguide_id', 'vote_date', 'roll_call_number', 'chamber'], unique=True)
    op.create_index(op.f('ix_vote_record_bill_id'), 'vote_record', ['bill_id'], unique=False)
    op.create_index(op.f('ix_vote_record_member_bioguide_id'), 'vote_record', ['member_bioguide_id'], unique=False)
    op.create_index(op.f('ix_vote_record_vote_date'), 'vote_record', ['vote_date'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_vote_record_vote_date'), table_name='vote_record')
    op.drop_index(op.f('ix_vote_record_member_bioguide_id'), table_name='vote_record')
    op.drop_index(op.f('ix_vote_record_bill_id'), table_name='vote_record')
    op.drop_index('ix_vote_dedup', table_name='vote_record')
    op.drop_table('vote_record')
    op.drop_index(op.f('ix_trade_prediction_trade_id'), table_name='trade_prediction')
    op.drop_table('trade_prediction')
    op.drop_index(op.f('ix_lobbying_lobbyist_filing_id'), table_name='lobbying_lobbyist')
    op.drop_table('lobbying_lobbyist')
    op.drop_index('ix_cosponsor_dedup', table_name='bill_cosponsor')
    op.drop_index(op.f('ix_bill_cosponsor_member_bioguide_id'), table_name='bill_cosponsor')
    op.drop_index(op.f('ix_bill_cosponsor_bill_id'), table_name='bill_cosponsor')
    op.drop_table('bill_cosponsor')
    op.drop_index(op.f('ix_trade_disclosure_transaction_date'), table_name='trade_disclosure')
    op.drop_index(op.f('ix_trade_disclosure_ticker'), table_name='trade_disclosure')
    op.drop_index(op.f('ix_trade_disclosure_member_bioguide_id'), table_name='trade_disclosure')
    op.drop_index(op.f('ix_trade_disclosure_disclosure_date'), table_name='trade_disclosure')
    op.drop_index('ix_trade_dedup', table_name='trade_disclosure')
    op.drop_table('trade_disclosure')
    op.drop_index('ix_signal_type_active_created', table_name='signal')
    op.drop_index(op.f('ix_signal_ticker'), table_name='signal')
    op.drop_index(op.f('ix_signal_signal_type'), table_name='signal')
    op.drop_index(op.f('ix_signal_member_bioguide_id'), table_name='signal')
    op.drop_table('signal')
    op.drop_index(op.f('ix_sentiment_analysis_media_content_id'), table_name='sentiment_analysis')
    op.drop_table('sentiment_analysis')
    op.drop_index(op.f('ix_member_staff_member_bioguide_id'), table_name='member_staff')
    op.drop_table('member_staff')
    op.drop_index(op.f('ix_member_media_mention_member_bioguide_id'), table_name='member_media_mention')
    op.drop_index(op.f('ix_member_media_mention_media_content_id'), table_name='member_media_mention')
    op.drop_table('member_media_mention')
    op.drop_index(op.f('ix_member_family_member_bioguide_id'), table_name='member_family')
    op.drop_table('member_family')
    op.drop_index(op.f('ix_lobbying_filing_filing_uuid'), table_name='lobbying_filing')
    op.drop_table('lobbying_filing')
    op.drop_index('ix_hearing_dedup', table_name='committee_hearing')
    op.drop_index(op.f('ix_committee_hearing_hearing_date'), table_name='committee_hearing')
    op.drop_index(op.f('ix_committee_hearing_committee_code'), table_name='committee_hearing')
    op.drop_table('committee_hearing')
    op.drop_index(op.f('ix_committee_assignment_member_bioguide_id'), table_name='committee_assignment')
    op.drop_table('committee_assignment')
    op.drop_index(op.f('ix_campaign_contribution_matched_ticker'), table_name='campaign_contribution')
    op.drop_index(op.f('ix_campaign_contribution_fec_transaction_id'), table_name='campaign_contribution')
    op.drop_index(op.f('ix_campaign_contribution_contributor_employer'), table_name='campaign_contribution')
    op.drop_index(op.f('ix_campaign_contribution_contribution_date'), table_name='campaign_contribution')
    op.drop_index(op.f('ix_campaign_contribution_committee_id'), table_name='campaign_contribution')
    op.drop_table('campaign_contribution')
    op.drop_index(op.f('ix_bill_sponsor_bioguide_id'), table_name='bill')
    op.drop_index(op.f('ix_bill_introduced_date'), table_name='bill')
    op.drop_index('ix_bill_congress_type', table_name='bill')
    op.drop_index(op.f('ix_bill_congress_number'), table_name='bill')
    op.drop_index(op.f('ix_bill_bill_id'), table_name='bill')
    op.drop_table('bill')
    op.drop_table('stock_daily')
    op.drop_index(op.f('ix_ml_model_artifact_model_name'), table_name='ml_model_artifact')
    op.drop_table('ml_model_artifact')
    op.drop_index('ix_media_source_type_date', table_name='media_content')
    op.drop_index(op.f('ix_media_content_source_type'), table_name='media_content')
    op.drop_index(op.f('ix_media_content_published_date'), table_name='media_content')
    op.drop_table('media_content')
    op.drop_index(op.f('ix_lobbying_registrant_senate_id'), table_name='lobbying_registrant')
    op.drop_index(op.f('ix_lobbying_registrant_name'), table_name='lobbying_registrant')
    op.drop_table('lobbying_registrant')
    op.drop_index(op.f('ix_lobbying_client_normalized_name'), table_name='lobbying_client')
    op.drop_index(op.f('ix_lobbying_client_name'), table_name='lobbying_client')
    op.drop_index(op.f('ix_lobbying_client_matched_ticker'), table_name='lobbying_client')
    op.drop_table('lobbying_client')
    op.drop_table('congress_member')
    op.drop_table('committee')
    op.drop_index(op.f('ix_campaign_committee_member_bioguide_id'), table_name='campaign_committee')
    op.drop_index(op.f('ix_campaign_committee_fec_committee_id'), table_name='campaign_committee')
    op.drop_index(op.f('ix_campaign_committee_candidate_fec_id'), table_name='campaign_committee')
    op.drop_table('campaign_committee')
    op.drop_table('alert_config')
    # ### end Alembic commands ###
